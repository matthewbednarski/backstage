/*! For license information please see 02519593.77691df0.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[749765],{835923:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var n=t(474848),s=t(28453);const i={id:"url-reader",title:"Url Reader Service",sidebar_label:"Url Reader",description:"Documentation for the Url Reader service"},a="URL Readers",o={id:"backend-system/core-services/url-reader",title:"Url Reader Service",description:"Documentation for the Url Reader service",source:"@site/versioned_docs/version-stable/backend-system/core-services/url-reader.md",sourceDirName:"backend-system/core-services",slug:"/backend-system/core-services/url-reader",permalink:"/docs/backend-system/core-services/url-reader",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/backend-system/core-services/url-reader.md",tags:[],version:"stable",frontMatter:{id:"url-reader",title:"Url Reader Service",sidebar_label:"Url Reader",description:"Documentation for the Url Reader service"},sidebar:"docs",previous:{title:"Token Manager",permalink:"/docs/backend-system/core-services/token-manager"},next:{title:"User Info",permalink:"/docs/backend-system/core-services/user-info"}},c={},d=[{value:"Using the service",id:"using-the-service",level:2}];function l(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"url-readers",children:"URL Readers"})}),"\n",(0,n.jsxs)(r.p,{children:["Plugins will require communication with certain integrations that users have configured. Popular integrations are things like Version Control Systems (VSC), such as GitHub, BitBucket GitLab etc. These integrations are configured in the ",(0,n.jsx)(r.code,{children:"integrations"})," section of the ",(0,n.jsx)(r.code,{children:"app-config.yaml"})," file."]}),"\n",(0,n.jsx)(r.p,{children:"These URL readers are basically wrappers with authentication for files and folders that could be stored in these VCS repositories."}),"\n",(0,n.jsx)(r.h2,{id:"using-the-service",children:"Using the service"}),"\n",(0,n.jsxs)(r.p,{children:["The following example shows how to get the URL Reader service in your ",(0,n.jsx)(r.code,{children:"example"})," backend plugin to read a file and a directory from a GitHub repository."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import {\n  coreServices,\n  createBackendPlugin,\n} from '@backstage/backend-plugin-api';\nimport os from 'os';\n\ncreateBackendPlugin({\n  pluginId: 'example',\n  register(env) {\n    env.registerInit({\n      deps: {\n        urlReader: coreServices.urlReader,\n      },\n      async init({ urlReader }) {\n        const buffer = await urlReader\n          .read('https://github.com/backstage/backstage/blob/master/README.md')\n          .then(r => r.buffer());\n\n        const tmpDir = os.tmpdir();\n        const directory = await urlReader\n          .readTree(\n            'https://github.com/backstage/backstage/tree/master/packages/backend',\n          )\n          .then(tree => tree.dir({ targetDir: tmpDir }));\n      },\n    });\n  },\n});\n"})})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},221020:(e,r,t)=>{var n=t(296540),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var n,i={},d=null,l=null;for(n in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(l=r.ref),r)a.call(r,n)&&!c.hasOwnProperty(n)&&(i[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===i[n]&&(i[n]=r[n]);return{$$typeof:s,type:e,key:d,ref:l,props:i,_owner:o.current}}r.Fragment=i,r.jsx=d,r.jsxs=d},474848:(e,r,t)=>{e.exports=t(221020)},28453:(e,r,t)=>{t.d(r,{R:()=>a,x:()=>o});var n=t(296540);const s={},i=n.createContext(s);function a(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);