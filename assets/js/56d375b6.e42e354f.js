/*! For license information please see 56d375b6.e42e354f.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[769973],{557112:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var s=r(474848),t=r(28453);const o={id:"backend-common.hostdiscovery",title:"HostDiscovery",description:"API reference for HostDiscovery"},c=void 0,i={id:"reference/backend-common.hostdiscovery",title:"HostDiscovery",description:"API reference for HostDiscovery",source:"@site/versioned_docs/version-stable/reference/backend-common.hostdiscovery.md",sourceDirName:"reference",slug:"/reference/backend-common.hostdiscovery",permalink:"/docs/reference/backend-common.hostdiscovery",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/reference/backend-common.hostdiscovery.md",tags:[],version:"stable",frontMatter:{id:"backend-common.hostdiscovery",title:"HostDiscovery",description:"API reference for HostDiscovery"}},a={},d=[{value:"Methods",id:"methods",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/reference/",children:"Home"})," > ",(0,s.jsx)(n.a,{href:"/docs/reference/backend-common",children:(0,s.jsx)(n.code,{children:"@backstage/backend-common"})})," > ",(0,s.jsx)(n.a,{href:"/docs/reference/backend-common.hostdiscovery",children:(0,s.jsx)(n.code,{children:"HostDiscovery"})})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Warning: This API is now obsolete."}),"\n",(0,s.jsxs)(n.p,{children:["Please import from ",(0,s.jsx)(n.code,{children:"@backstage/backend-defaults/discovery"})," instead."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"HostDiscovery is a basic PluginEndpointDiscovery implementation that can handle plugins that are hosted in a single or multiple deployments."}),"\n",(0,s.jsx)(n.p,{children:"The deployment may be scaled horizontally, as long as the external URL is the same for all instances. However, internal URLs will always be resolved to the same host, so there won't be any balancing of internal traffic."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Signature:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"class HostDiscovery implements DiscoveryService \n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Implements:"})," ",(0,s.jsx)(n.a,{href:"/docs/reference/backend-plugin-api.discoveryservice",children:"DiscoveryService"})]}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Modifiers"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/reference/backend-common.hostdiscovery.fromconfig",children:"fromConfig(config, options)"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"static"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsxs)(n.p,{children:["Creates a new HostDiscovery discovery instance by reading from the ",(0,s.jsx)(n.code,{children:"backend"})," config section, specifically the ",(0,s.jsx)(n.code,{children:".baseUrl"})," for discovering the external URL, and the ",(0,s.jsx)(n.code,{children:".listen"})," and ",(0,s.jsx)(n.code,{children:".https"})," config for the internal one."]}),(0,s.jsxs)(n.p,{children:["Can be overridden in config by providing a target and corresponding plugins in ",(0,s.jsx)(n.code,{children:"discovery.endpoints"}),". eg."]})]})]})})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"discovery:\n endpoints:\n   - target: https://internal.example.com/internal-catalog\n     plugins: [catalog]\n   - target: https://internal.example.com/secure/api/{{pluginId}}\n     plugins: [auth, permission]\n   - target:\n       internal: https://internal.example.com/search\n       external: https://example.com/search\n     plugins: [search]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The basePath defaults to ",(0,s.jsx)(n.code,{children:"/api"}),", meaning the default full internal path for the ",(0,s.jsx)(n.code,{children:"catalog"})," plugin will be ",(0,s.jsx)(n.code,{children:"http://localhost:7007/api/catalog"}),"."]})," |\n|  [getBaseUrl(pluginId)](./backend-common.hostdiscovery.getbaseurl.md) |  |  |\n|  [getExternalBaseUrl(pluginId)](./backend-common.hostdiscovery.getexternalbaseurl.md) |  |  |\n"]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},221020:(e,n,r)=>{var s=r(296540),t=Symbol.for("react.element"),o=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,r){var s,o={},d=null,l=null;for(s in void 0!==r&&(d=""+r),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(l=n.ref),n)c.call(n,s)&&!a.hasOwnProperty(s)&&(o[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===o[s]&&(o[s]=n[s]);return{$$typeof:t,type:e,key:d,ref:l,props:o,_owner:i.current}}n.Fragment=o,n.jsx=d,n.jsxs=d},474848:(e,n,r)=>{e.exports=r(221020)},28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var s=r(296540);const t={},o=s.createContext(t);function c(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);